(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))t(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&t(r)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function t(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();function U(o){o.innerHTML="<h2>Página de Inicio</h2><p>Bienvenido a Pollería Montiel</p>"}const Q=[{id:"PECH",nombre:"Pechuga",imagen:"../../../images/catalogo/PECH.png",tipoVenta:"peso",precios:{publico:120,cocina:117,aliado:110,leal:110,mayoreo:105},personalizaciones:[{grupo:"Procesamientos",tipo:"checkbox",default:["E"],options:[{id:"E",nombre:"Entera"},{id:"C2",nombre:"Cortada en 2"},{id:"C3",nombre:"Cortada en 3"},{id:"C4",nombre:"Cortada en 4"},{id:"C6",nombre:"Cortada en 6"},{id:"S/P",nombre:"Sin piel"},{id:"S/H",nombre:"Sin Hueso"},{id:"PP",nombre:"En Pulpa"},{id:"ASR",nombre:"Asar"},{id:"FR",nombre:"Freir"},{id:"MIL",nombre:"Milanesa"},{id:"FJ",nombre:"Fajitas"},{id:"CUB",nombre:"Cubos"},{id:"MOL",nombre:"Molida"}]}],subproductos:[{id:"PP-PECH",nombre:"Pulpa de Pechuga",tipoVenta:"peso",precios:{publico:185,cocina:175,leal:null,aliado:null,mayoreo:150},personalizaciones:[{grupo:"Procesamientos",tipo:"checkbox",default:["MIL"],options:[{id:"E",nombre:"Entera"},{id:"ASR",nombre:"Asar"},{id:"FR",nombre:"Freir"},{id:"MIL",nombre:"Milanesa"},{id:"FJ",nombre:"Fajitas"},{id:"CUB",nombre:"Cubos"},{id:"MOL",nombre:"Molida"}]}]}]},{id:"AL",nombre:"Ala",imagen:"../../../images/catalogo/AL.png",tipoVenta:"peso",precios:{publico:100,cocina:85,aliado:85,leal:null,mayoreo:null},promociones:[{tipo:"publico",desde:10,precio:120}],personalizaciones:[{grupo:"Procesamientos",tipo:"checkbox",default:["E"],options:[{id:"E",nombre:"Entera"},{id:"C2",nombre:"Cortada en 2"},{id:"C3",nombre:"Cortada en 3"}]}]},{id:"RTZ",nombre:"Retazo",imagen:"../../../images/catalogo/RTZ.png",tipoVenta:"peso",precios:{publico:100,cocina:85,aliado:85,leal:null,mayoreo:null},promociones:[{desde:3,precio:33.33},{desde:5,precio:20}],personalizaciones:[{grupo:"Procesamientos",tipo:"checkbox",default:["E"],options:[{id:"E",nombre:"Entero"},{id:"C",nombre:"Cortado"},{id:"S/P",nombre:"Sin piel"}]}],variantes:[{id:"RTZ | AL",nombre:"Retazo con ala",tipoVenta:"peso",precios:{publico:55,cocina:null,leal:null,aliado:null,mayoreo:null},personalizaciones:[{grupo:"Procesamientos",tipo:"checkbox",default:["E"],options:[{id:"E",nombre:"Entero"},{id:"S/P",nombre:"Sin piel"},{id:"C",nombre:"Cortado"}]}]}],subproductos:[{id:"H",nombre:"Huacal",tipoVenta:"peso",precios:{publico:45,cocina:null,leal:null,aliado:null,mayoreo:null},personalizaciones:[{grupo:"Procesamientos",tipo:"checkbox",default:["E"],options:[{id:"E",nombre:"Entero"},{id:"S/P",nombre:"Sin piel"},{id:"C",nombre:"Cortado"}]}]},{id:"CD",nombre:"Cadera",tipoVenta:"peso",precios:{publico:45,cocina:null,leal:null,aliado:null,mayoreo:null},personalizaciones:[{grupo:"Procesamientos",tipo:"checkbox",default:["C"],options:[{id:"E",nombre:"Entero"},{id:"S/P",nombre:"Sin piel"},{id:"C",nombre:"Cortada"}]}]}]},{id:"PM",nombre:"Pierna con Muslo",imagen:"../../../images/catalogo/PM.png",tipoVenta:"peso",precios:{publico:100,cocina:85,aliado:85,leal:null,mayoreo:null},personalizaciones:[{grupo:"Procesamientos",tipo:"checkbox",default:["C"],options:[{id:"E",nombre:"Enteras"},{id:"C",nombre:"Cortadas"},{id:"S/P",nombre:"Sin piel"},{id:"S/H",nombre:"Sin Hueso"},{id:"PP",nombre:"En Pulpa"},{id:"ASR",nombre:"Asar"},{id:"FR",nombre:"Freir"},{id:"MIL",nombre:"Milanesa"},{id:"FJ",nombre:"Fajitas"},{id:"CUB",nombre:"Cubos"},{id:"MOL",nombre:"Molida"}]}],subproductos:[{id:"PP-PM",nombre:"Pulpa de Pierna con Muslo",tipoVenta:"peso",precios:{publico:125,cocina:null,leal:null,aliado:null,mayoreo:null},personalizaciones:[{grupo:"Procesamientos",tipo:"checkbox",default:["E"],options:[{id:"E",nombre:"Sin Procesar"},{id:"MOL",nombre:"Molida"}]}]}],especiales:[{id:"PG",nombre:"Pierna",tipoVenta:"peso",precios:{publico:105,cocina:null,leal:null,aliado:null,mayoreo:null},personalizaciones:[{grupo:"Procesamientos",tipo:"checkbox",default:["E"],options:[{id:"E",nombre:"Entera"},{id:"C",nombre:"Cortada"},{id:"S/P",nombre:"Sin piel"},{id:"S/H",nombre:"Sin Hueso"},{id:"PP",nombre:"En Pulpa"},{id:"ASR",nombre:"Asar"},{id:"FR",nombre:"Freir"},{id:"MIL",nombre:"Milanesa"},{id:"MOL",nombre:"Molida"}]}]},{id:"MSL",nombre:"Muslo",tipoVenta:"peso",precios:{publico:100,cocina:null,leal:null,aliado:null,mayoreo:null},personalizaciones:[{grupo:"Procesamientos",tipo:"checkbox",default:["E"],options:[{id:"E",nombre:"Entero"},{id:"C",nombre:"Cortado"},{id:"S/P",nombre:"Sin piel"},{id:"S/H",nombre:"Sin Hueso"},{id:"PP",nombre:"En Pulpa"},{id:"ASR",nombre:"Asar"},{id:"FR",nombre:"Freir"},{id:"MIL",nombre:"Milanesa"},{id:"MOL",nombre:"Molido"}]}]}]},{id:"PT",nombre:"Patas",imagen:"../../../images/catalogo/PT.png",tipoVenta:"peso",precios:{publico:65,cocina:null,leal:null,aliado:null,mayoreo:null}},{id:"MHG",nombre:"Molleja con Hígado",imagen:"./js/data/images/MLJ.png",tipoVenta:"peso",precios:{publico:40,cocina:null,leal:null,aliado:null,mayoreo:null},promociones:[{desde:2,precio:35}],personalizaciones:[{grupo:"Procesamientos",tipo:"checkbox",default:[],options:[{id:"S/G",nombre:"Sin grasa"}]}],especiales:[{id:"HG",nombre:"Hígado",tipoVenta:"peso",precios:{publico:35,cocina:null,leal:null,aliado:null,mayoreo:null}},{id:"MLJ",nombre:"Molleja",tipoVenta:"peso",precios:{publico:75,cocina:null,leal:null,aliado:null,mayoreo:null},personalizaciones:[{grupo:"Procesamientos",tipo:"checkbox",default:["S/G"],options:[{id:"S/G",nombre:"Sin grasa"}]}]}]},{id:"PE",nombre:"Pollo Entero",imagen:"../../../images/catalogo/PE.png",tipoVenta:"peso",precios:{publico:90,cocina:null,leal:null,aliado:null,mayoreo:null},promociones:[{tipo:"peso",desde:8,precio:82}],personalizaciones:[{grupo:"Procesamientos",tipo:"radio",default:["DST4"],options:[{id:"E",nombre:"Entero"},{id:"DST2",nombre:"Destazado (Pechuga en 2)"},{id:"DST4",nombre:"Destazado (Pechuga en 4)"},{id:"DST6",nombre:"Destazado (Pechuga en 6)"},{id:"DST-ASR",nombre:"Destazado (Pechuga p/Asar)"},{id:"DST-FR",nombre:"Destazado (Pechuga p/Freir)"},{id:"DST-MIL",nombre:"Destazado (Pechuga p/Milanesa)"},{id:"DST-FJ",nombre:"Destazado (Pechuga p/Fajitas)"}]}],variantes:[{id:"CNL",nombre:"Canal",tipoVenta:"peso",precios:{publico:75,cocina:null,leal:null,aliado:null,mayoreo:null}}]},{id:"SRT",nombre:"Surtida",imagen:"../../../images/catalogo/SRT.png",tipoVenta:"peso",precios:{publico:85,cocina:74,leal:null,aliado:null,mayoreo:null},promociones:[{desde:2,precio:80},{desde:3,precio:70}],personalizaciones:[{grupo:"Procesamientos",tipo:"checkbox",default:["C | H"],options:[{id:"C | H",nombre:"Con Huacal"},{id:"C | CD",nombre:"Con Cadera"},{id:"S/P",nombre:"Sin piel"}]}]},{id:"DSP",nombre:"Surtido",imagen:"../../../images/catalogo/DSP.png",tipoVenta:"peso",precios:{publico:15,cocina:null,leal:null,aliado:null,mayoreo:null},personalizaciones:[],variantes:[{id:"DSH",nombre:"Solo Huesos",tipoVenta:"peso",precios:{publico:20,cocina:null,leal:null,aliado:null,mayoreo:null}},{id:"CBZ",nombre:"Cabezas",tipoVenta:"peso",precios:{publico:20,cocina:null,leal:null,aliado:null,mayoreo:null}},{id:"DSL",nombre:"Piezas Last..das",tipoVenta:"peso",precios:{publico:25,cocina:null,leal:null,aliado:null,mayoreo:null}}]}];let E=[];async function X(o){try{const e=await fetch("src/views/carrito.html");if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const n=await e.text();o.innerHTML=n;const t=o.querySelector("#btn-cobrar"),a=o.querySelector("#btn-guardar-pedido"),i=o.querySelector("#carrito-items-list");t&&t.addEventListener("click",oe),a&&a.addEventListener("click",ne),i&&i.addEventListener("click",Y),G()}catch(e){console.error("Error loading carrito:",e),o.innerHTML="<p>Error al cargar el carrito.</p>"}}function Y(o){const n=o.target.closest(".remove-item-btn");if(n){const t=n.closest("tr");if(t){const a=parseInt(t.dataset.itemIndex,10);isNaN(a)||ee(a)}}}function _(o){E.push(o),console.log("Item añadido al carrito:",o),G()}function ee(o){if(o>=0&&o<E.length){const e=E.splice(o,1);console.log("Item removido del carrito:",e),G()}else console.warn("Intento de remover item con índice inválido:",o)}function G(){const o=document.getElementById("carrito-container"),e=document.getElementById("carrito-items-list"),n=document.getElementById("carrito-total-value"),t=document.getElementById("main-content");if(!e||!n||!o||!t){console.error("Elementos del carrito o main content no encontrados en el DOM.");return}e.innerHTML="";let a=0;if(E.length>0){E.forEach((l,m)=>{const P=document.createElement("tr");P.dataset.itemIndex=m;const v=document.createElement("td"),F=l.optionName||l.optionId,x=l.optionId&&l.optionId!==l.productId?` (${l.optionId})`:"";let S="";if(l.personalizations){const R=Object.values(l.personalizations).flat();R.length>0&&(S=` (${R.join(", ")})`)}const M=l.pricePerKg!==void 0&&l.pricePerKg!==null?l.pricePerKg.toFixed(2):l.quantity>0?(l.cost/l.quantity).toFixed(2):"0.00",O=`<div class="item-nombre">${F}${x}${S}</div>`,W=`<div class="item-detalle">${l.quantity.toFixed(3)}(kg) * ($${M})</div>`;v.innerHTML=`
                ${O}
                ${W}
            `,P.appendChild(v);const D=document.createElement("td");D.classList.add("item-subtotal"),D.textContent=`$${l.cost.toFixed(2)}`,P.appendChild(D);const w=document.createElement("td");w.classList.add("item-acciones"),w.innerHTML='<button class="remove-item-btn" aria-label="Eliminar item">×</button>',P.appendChild(w),e.appendChild(P),a+=l.cost}),o.classList.add("visible");const i=o.getBoundingClientRect().height,r=getComputedStyle(document.documentElement),d=parseFloat(r.getPropertyValue("--espacio-l"));t.style.paddingBottom=`${i+d}px`}else o.classList.remove("visible"),t.style.paddingBottom="";n.textContent=`$${a.toFixed(2)}`}function oe(){console.log('Botón "Cobrar" clicado.'),alert('Funcionalidad "Cobrar" pendiente.')}function ne(){console.log('Botón "Guardar Pedido" clicado.'),alert('Funcionalidad "Guardar Pedido" pendiente.')}let b=null,u=null,s=null,f={},c=null,p=null,C=null,h=null,g=null,T=null,z=null,$=null,H=null,k=null,y=null;function te(o,e,n){b=o.currentProduct,u=o.selectedOptionId,s=o.selectedPriceType,f=o.selectedPersonalizations,c=e.cantidadInput,p=e.costoInput,C=e.opcionesGrid,h=e.preciosGrid,g=e.procesamientosGrid,T=e.addToOrderBtn,z=e.cancelarModalBtn,$=e.closeModalBtn,H=n.renderPrecios,k=n.renderPersonalizaciones,y=n.closeCatalogoModal,$&&$.addEventListener("click",j),z&&z.addEventListener("click",j),T&&T.addEventListener("click",de),c&&c.addEventListener("input",ie),p&&p.addEventListener("input",le),C&&C.addEventListener("click",re),h&&h.addEventListener("click",ce),g&&g.addEventListener("change",se);const t=L(u);t&&Z(t)}function ae(){b=null,u=null,s=null,f={},c=null,p=null,C=null,h=null,g=null,T=null,z=null,$=null,H=null,k=null,y=null}function j(){y&&y()}function ie(o){const e=parseFloat(c.value);if(p.value="",p.placeholder="0.00",isNaN(e)||e<=0||s===null){p.placeholder="0.00";return}const n=L(u);if(!n||!n.precios||n.precios[s]===null){console.warn(`Precio para la opción ${u} y tipo ${s} no encontrado.`),p.placeholder="Error";return}const t=n.precios[s],a=e*t;p.placeholder=`$${a.toFixed(2)}`}function le(o){const e=parseFloat(p.value);if(c.value="",c.placeholder="0.00",isNaN(e)||e<=0||s===null){c.placeholder="0.00";return}const n=L(u);if(!n||!n.precios||n.precios[s]===null){console.warn(`Precio para la opción ${u} y tipo ${s}. No se puede calcular la cantidad.`),c.placeholder="Error";return}const t=n.precios[s];if(t<=0){console.warn(`Precio por kg es cero o negativo para la opción ${u} y tipo ${s}. No se puede calcular la cantidad.`),c.placeholder="Error";return}const a=e/t;c.placeholder=`${a.toFixed(3)} kg`}function re(o){const e=o.target.closest(".modal-btn");if(!e)return;const n=e.dataset.optionId;C.querySelectorAll(".modal-btn").forEach(t=>{t.classList.remove("selected")}),e.classList.add("selected"),u=n,console.log(`Opción seleccionada: ${u}`),pe(u)}function ce(o){const e=o.target.closest(".modal-btn.precio-btn");if(!e)return;const n=e.dataset.priceType;h.querySelectorAll(".modal-btn.precio-btn").forEach(t=>{t.classList.remove("selected")}),e.classList.add("selected"),s=n,console.log(`Tipo de precio seleccionado: ${s}`),c.value="",p.value="",c.placeholder="0.00",p.placeholder="0.00"}function se(o){const e=o.target;if(!e.matches('.procesamientos-grid label input[type="checkbox"], .procesamientos-grid label input[type="radio"]'))return;const n=e.dataset.groupId,t=e.value,a=e.closest("label");f[n]||(f[n]=[]),e.type==="checkbox"?e.checked?f[n].includes(t)||(f[n].push(t),a&&a.classList.add("selected")):(f[n]=f[n].filter(i=>i!==t),a&&a.classList.remove("selected")):e.type==="radio"&&(f[n]=[t],g&&g.querySelectorAll(`label input[type="radio"][name="${n}"]`).forEach(r=>{const d=r.closest("label");d&&d.classList.remove("selected")}),a&&a.classList.add("selected")),console.log("Personalizaciones seleccionadas:",f)}function de(){const o=c.value!==""?parseFloat(c.value):parseFloat(c.placeholder.replace(" kg","")),e=p.value!==""?parseFloat(p.value):parseFloat(p.placeholder.replace("$",""));if(u===null||s===null||(isNaN(o)||o<=0)&&(isNaN(e)||e<=0)){alert("Por favor, selecciona una opción, un tipo de precio y registra la cantidad o el costo.");return}const n=L(u);if(!n){console.error(`Datos para la opción ${u} no encontrados al añadir al carrito.`),alert("Error al añadir el producto. Inténtalo de nuevo.");return}const t=n.precios?n.precios[s]:null;if(t===null){console.error(`Precio por kg no encontrado para la opción ${u} y tipo ${s}.`),alert("Error al obtener el precio del producto. Inténtalo de nuevo.");return}const a={};n.personalizaciones&&n.personalizaciones.forEach(r=>{const d=f[r.grupo]||[];if(d.length>0){const l=r.options.filter(m=>d.includes(m.id)).map(m=>m.nombre);l.length>0&&(a[r.grupo]=l)}});const i={productId:b.id,optionId:u,optionName:n.nombre,quantity:o,cost:e,priceType:s,pricePerKg:t,personalizations:a};console.log("Item a añadir al pedido:",i),_(i),y&&y()}function L(o){if(!b)return null;if(b.id===o)return b;if(b.subproductos){const e=b.subproductos.find(n=>n.id===o);if(e)return e}if(b.especiales){const e=b.especiales.find(n=>n.id===o);if(e)return e}if(b.variantes){const e=b.variantes.find(n=>n.id===o);if(e)return e}return null}function pe(o){const e=L(o);if(!e){console.error(`Datos para la opción ${o} no encontrados.`);return}H&&h&&(H(h,e.precios),Z(e));const n=g?g.closest(".modal-section.procesamientos"):null;k&&g?k(g,e.personalizaciones):n&&(!e.personalizaciones||e.personalizaciones.length===0?n.style.display="none":n.style.display="block"),c&&(c.value=""),p&&(p.value=""),c&&(c.placeholder="0.00"),p&&(p.placeholder="0.00")}function Z(o){if(s=null,h&&h.querySelectorAll(".modal-btn.precio-btn").forEach(e=>{e.classList.remove("selected")}),o&&o.precios&&o.precios.publico!==null){const e=h.querySelector('.modal-btn.precio-btn[data-price-type="publico"]');e&&(e.classList.add("selected"),s="publico",console.log(`Tipo de precio seleccionado por defecto: ${s}`))}else console.log(`Opción ${o?o.id:"N/A"} no tiene precio 'publico' o datos no encontrados.`)}let q=null,V=null,N=null,B={};async function ue(o){const e=Q.find(O=>O.id===o);if(!e){console.error(`Producto con ID ${o} no encontrado.`);return}q=e,V=e.id,N=null,B={};const n=await fetch("src/views/catalogo.modal.html");if(!n.ok){console.error("Error loading catalogo modal template:",n.statusText);return}const t=await n.text(),a=document.createElement("div");a.innerHTML=t;const i=a.querySelector("#product-modal-container");if(!i){console.error("Modal container not found in template.");return}const r=i.querySelector("#modal-product-name"),d=i.querySelector(".opciones-grid"),l=i.querySelector(".precios-grid"),m=i.querySelector("#cantidad-input"),P=i.querySelector("#costo-input"),v=i.querySelector(".procesamientos-grid"),F=i.querySelector(".close-modal-btn"),x=i.querySelector("#cancelar-modal-btn"),S=i.querySelector("#add-to-order-btn");r.textContent=e.nombre,be(d,e),K(l,e.precios),J(v,e.personalizaciones),te({currentProduct:q,selectedOptionId:V,selectedPriceType:N,selectedPersonalizations:B},{cantidadInput:m,costoInput:P,opcionesGrid:d,preciosGrid:l,procesamientosGrid:v,addToOrderBtn:S,cancelarModalBtn:x,closeModalBtn:F},{renderPrecios:K,renderPersonalizaciones:J,closeCatalogoModal:me}),document.body.appendChild(i),setTimeout(()=>{i.classList.add("visible")},10);const M=d.querySelector(`.modal-btn[data-option-id="${e.id}"]`);M&&M.classList.add("selected")}function me(){const o=document.getElementById("product-modal-container");o&&(o.classList.remove("visible"),o.addEventListener("transitionend",()=>{o.remove(),q=null,V=null,N=null,B={},ae()},{once:!0}))}function be(o,e){o.innerHTML="";const n=o.closest(".modal-section.opciones");let t=0;const a=I(e.id,e.nombre);o.appendChild(a),t++,e.subproductos&&e.subproductos.length>0&&e.subproductos.forEach(i=>{const r=I(i.id,i.nombre);o.appendChild(r),t++}),e.especiales&&e.especiales.length>0&&e.especiales.forEach(i=>{const r=I(i.id,i.nombre);o.appendChild(r),t++}),e.variantes&&e.variantes.length>0&&e.variantes.forEach(i=>{const r=I(i.id,i.nombre);o.appendChild(r),t++}),n&&(t<=1?n.style.display="none":n.style.display="block")}function I(o,e){const n=document.createElement("button");return n.classList.add("modal-btn"),n.dataset.optionId=o,n.textContent=e,n}function K(o,e){o.innerHTML="";for(const n in e){const t=e[n];if(t!==null){const a=fe(n,t);o.appendChild(a)}}}function fe(o,e){const n=document.createElement("button");return n.classList.add("modal-btn","precio-btn"),n.dataset.priceType=o,n.innerHTML=`
        <span>${o.charAt(0).toUpperCase()+o.slice(1)}</span> <!-- Capitalizar el tipo -->
        <span>$${e.toFixed(2)}</span>
    `,n}function J(o,e){o.innerHTML="";const n=o.closest(".modal-section.procesamientos");if(!e||e.length===0){n&&(n.style.display="none");return}else n&&(n.style.display="block");e.forEach(t=>{t.options.forEach(a=>{const i=`pers-${t.grupo.replace(/\s+/g,"-")}-${a.id}`,r=(B[t.grupo]||[]).includes(a.id),d=document.createElement("input");d.type=t.tipo,d.id=i,d.name=t.grupo,d.value=a.id,d.checked=r,d.dataset.groupId=t.grupo;const l=document.createElement("span");l.textContent=a.nombre;const m=document.createElement("label");m.htmlFor=i,m.appendChild(d),m.appendChild(l),r&&m.classList.add("selected"),o.appendChild(m)})})}async function ge(o){try{const e=await fetch("src/views/catalogo.html");if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const n=await e.text();o.innerHTML=n,o.querySelectorAll(".product-btn").forEach(a=>{a.addEventListener("click",()=>{const i=a.dataset.productId;i&&ue(i)})})}catch(e){console.error("Error loading catalogo:",e),o.innerHTML="<p>Error al cargar el catálogo de productos.</p>"}}function he(o){o.innerHTML="";const e=document.createElement("div");e.id="catalogo-section",o.appendChild(e),ge(e);const n=document.createElement("div");n.id="carrito-section",o.appendChild(n),X(n)}const Pe={"/":U,"/venta":he};function ye(){const o=document.getElementById("main-content");function e(t){history.pushState(null,null,t),n(t)}function n(t){const i=Pe[t===""?"/":t]||U;o&&(o.innerHTML="",i(o))}window.addEventListener("popstate",()=>{n(location.pathname)}),document.body.addEventListener("click",t=>{t.target.matches("[data-link]")&&(t.preventDefault(),e(t.target.href))}),n(location.pathname)}async function ve(){const o=document.getElementById("navbar");if(o)try{const e=await fetch("src/views/navbar.html");if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const n=await e.text();o.innerHTML=n,A(),window.addEventListener("popstate",A),document.body.addEventListener("click",t=>{setTimeout(A,0)})}catch(e){console.error("Error loading navbar:",e),o.innerHTML="<p>Error al cargar la barra de navegación.</p>"}}function A(){const o=window.location.pathname;document.querySelectorAll(".nav-item").forEach(n=>{n.classList.remove("active-link");const t=new URL(n.href).pathname;o===t&&n.classList.add("active-link"),o==="/"&&t==="/"&&n.classList.add("active-link"),o==="/venta"&&t==="/venta"&&n.classList.add("active-link"),(o.startsWith(t)&&t!=="/"||o==="/"&&t==="/")&&n.classList.add("active-link")})}document.addEventListener("DOMContentLoaded",()=>{ve(),ye()});
